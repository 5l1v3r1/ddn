DDN区块链地址的生产与校验
--------------

## 关于 Base58 字符编码及加密

Base58加密原理：和通常base64编码一样，base58编码的作用也是将非可视字符可视化（ASCII化）。但不同的是base58编码去掉了几个看起来会产生歧义的字符，如 0 (零), O (大写字母O), I (大写的字母i) and l (小写的字母L) ，和几个影响双击选择的字符，如/, +。结果字符集正好58个字符(包括9个数字，24个大写字母，25个小写字母)。

参考：[bs58.js](../packages/ddn-crypto/src/base58check/bs58.js)

## 生成地址

1. 获取一个随机的32字节ECDSA密钥

2. 使用椭圆曲线加密算法计算上述私钥所对应的非压缩公钥

3. 对（压缩）公钥进行SHA-256哈希计算

4. 对步骤2的哈希值进行RIPEMD-160哈希计算

5. 在步骤3的哈希值前添加前缀（主网为0x00，测试网为0xef)

6. 对步骤4的扩展RIPEMD-160哈希值进行SHA256哈希计算

7. 对步骤5的哈希值再次进行SHA256哈希计算

8. 取步骤6结果值的前4个字节作为校验码
   
9. 将校验码添加到步骤4的扩展RIPEMD-160哈希值末尾

10. 使用Base58Check编码将结果从字节字符串转换为base58字符串。

## 验证地址

1. 把地址base58解码成字节数组
2. 把数组分成两个字节数组，字节数组（1）是后4字节数组，字节数组（2）是减去后4字节的数组
3. 把字节数组（2）两次Sha256 Hash
4. 取字节数组（2）hash后的前4位，跟字节数组（1）比较。如果相同校验通过。
5. 校验通过的解码字节数组取第一个字节，地址前缀。
6. 检验前缀的合法性（根据主网参数校验），注意大小写。